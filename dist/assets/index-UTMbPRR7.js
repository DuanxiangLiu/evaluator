import{r as e,P as t,a as s,A as r,H as a,F as l,U as o,b as n,c as i,d,e as c,S as x,X as m,B as g,f as p,C as h,K as u,G as b,g as f,h as y,i as v,j,k as w,R as N,l as C,m as k,T as A,D as M,n as _,L as S,Z as I,o as $}from"./icons-DDuVeY87.js";import{r as P}from"./vendor--mrzYHDs.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E={exports:{}},T={},F=e,O=Symbol.for("react.element"),D=Symbol.for("react.fragment"),W=Object.prototype.hasOwnProperty,Y=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V={key:!0,ref:!0,__self:!0,__source:!0};function z(e,t,s){var r,a={},l=null,o=null;for(r in void 0!==s&&(l=""+s),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(o=t.ref),t)W.call(t,r)&&!V.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:O,type:e,key:l,ref:o,props:a,_owner:Y.current}}T.Fragment=D,T.jsx=z,T.jsxs=z,E.exports=T;var L=E.exports,R={},B=P;R.createRoot=B.createRoot,R.hydrateRoot=B.hydrateRoot;const X=(t,s)=>{const[r,a]=e.useState(()=>{if("undefined"==typeof window)return s;try{const e=window.localStorage.getItem(t);return e?JSON.parse(e):s}catch(e){return console.warn(`Error reading localStorage key "${t}":`,e),s}});return[r,e.useCallback(e=>{try{a(e),"undefined"!=typeof window&&window.localStorage.setItem(t,JSON.stringify(e))}catch(s){console.warn(`Error setting localStorage key "${t}":`,s)}},[t])]},K=e=>{const t=e.filter(e=>0!==e),s=t.length;if(0===s)return 1;const r=t.map(e=>({val:e,abs:Math.abs(e)})).sort((e,t)=>e.abs-t.abs);let a=0,l=0;r.forEach((e,t)=>{const s=t+1;e.val>0?a+=s:l+=s});const o=Math.min(a,l),n=s*(s+1)*(2*s+1)/24;if(0===n)return 1;const i=(o-s*(s+1)/4)/Math.sqrt(n);return 2*(1-(e=>{const t=1/(1+.2316419*Math.abs(e)),s=.3989423*Math.exp(-e*e/2)*t*(.3193815+t*(t*(1.781478+t*(1.330274*t-1.821256))-.3565638));return e>0?1-s:s})(Math.abs(i)))},U=(e,t)=>{if(0===e.length)return 0;const s=[...e].sort((e,t)=>e-t),r=(s.length-1)*t,a=Math.floor(r),l=r-a;return void 0!==s[a+1]?s[a]+l*(s[a+1]-s[a]):s[a]},H=(e,t)=>null==e||null==t?null:0===e&&0===t?0:0===e&&t>0?-100:e>0?(e-t)/e*100:null,q=(e,t,s,r,a)=>{const l=r.filter(e=>a.has(e.Case)).map(r=>{var a,l;const o=null==(a=r.raw[e])?void 0:a[t],n=null==(l=r.raw[e])?void 0:l[s];if(null==o||null==n)return null;const i=H(o,n),d=(x=n,null==(c=o)||null==x?null:0===c&&0===x?1:0===c?2:x/c);var c,x;return{Case:r.Case,bVal:o,cVal:n,imp:i,ratio:d,meta:r.meta}}).filter(e=>null!==e),o=l.length;if(0===o)return null;const n=l.map(e=>e.imp),i=l.map(e=>e.ratio).filter(e=>e>0),d=l.map(e=>e.bVal-e.cVal);let c=1;if(i.length>0){const e=i.reduce((e,t)=>e+Math.log(t),0);c=Math.exp(e/i.length)}const x=100*(1-c),m=n.reduce((e,t)=>e+t,0)/o,g=K(d),p=n.reduce((e,t)=>e+Math.pow(t-m,2),0)/(o-1||1),h=Math.sqrt(p)/Math.sqrt(o)*1.96,u=m-h,b=m+h,f=n.filter(e=>e<0).length,y=U(n,.25),v=U(n,.5),j=U(n,.75),w=j-y,N=Math.min(...n),C=Math.max(...n),k=j+1.5*w,A=y-1.5*w;return l.forEach(e=>{e.imp>k?e.outlierType="positive":e.imp<A?e.outlierType="negative":e.outlierType="normal"}),{geomeanImp:x,meanImp:m,pValue:g,ciLower:u,ciUpper:b,degradedCount:f,q1:y,median:v,q3:j,iqr:w,minImp:N,maxImp:C,outlierUpper:k,outlierLower:A,improvements:n,validCases:l,nTotalChecked:a.size,nValid:o}},Z=e.createContext(null),G={provider:"deepseek",apiKey:"",baseUrl:"https://api.deepseek.com/v1",model:"deepseek-chat",systemPrompt:"ä½ æ˜¯ä¸€ä½é¡¶çº§çš„EDAç‰©ç†è®¾è®¡ä¸ç®—æ³•è¯„ä¼°ä¸“å®¶ã€‚è¯·åŸºäºæä¾›çš„æ•°æ®è¾“å‡ºç»“æ„åŒ–çš„è¯Šæ–­æŠ¥å‘Šï¼ŒåŠ¡å¿…å°†æœ€ç»ˆæ¨èç»“è®ºæ”¾åœ¨æœ€å‰é¢ã€‚è¯·ä½¿ç”¨Markdownæ’ç‰ˆã€‚",userPrompt:"æˆ‘æ­£åœ¨è¯„ä¼°EDAæ–°ç®—æ³•ã€‚Baseline = {{baseAlgo}}, Compare = {{compareAlgo}}ã€‚\n\nã€ç„¦ç‚¹æŒ‡æ ‡ ({{activeMetric}}) å¼‚å¸¸é¢„è­¦ã€‘\n{{badCases}}\n\nã€å…¨å±€å¤šç›®æ ‡è¡¨ç° (å…¨é¢æƒè¡¡)ã€‘\n{{allMetricsSummary}}\n\nè¯·æŒ‰ä»¥ä¸‹ç»“æ„è¾“å‡ºæŠ¥å‘Šï¼š\n### 1. ğŸ† æœ€ç»ˆå¯¹æ¯”åˆ¤å®š\nï¼ˆæ˜ç¡®ç»“è®ºï¼šã€æ¨èé‡‡ç”¨ {{compareAlgo}}ã€‘ã€ã€å»ºè®®ä¿æŒ {{baseAlgo}}ã€‘ æˆ– ã€éœ€ä¿®å¤é‡æµ‹ã€‘ï¼‰\n\n### 2. ğŸ“Š å…¨å±€ Trade-off åˆ†æ\nï¼ˆæ€»ä½“å¾—å¤±ï¼Œæ˜¯å¦åœ¨ç‰¹å®šæŒ‡æ ‡é—´å­˜åœ¨æ‹†ä¸œå¢™è¡¥è¥¿å¢™ï¼Ÿï¼‰\n\n### 3. ğŸš¨ å¼‚å¸¸æ·±æ½œè¯Šæ–­\nï¼ˆæ¨æµ‹é€€åŒ–é™·é˜±åŠç‰©ç†åŸå› ï¼‰\n\n### 4. ğŸ¢ æ‰©å±•æ€§è¯„ä¼°\nï¼ˆåŸºäºå·¨å‹è®¾è®¡è¯„ä¼°åœ¨å¤§è§„æ¨¡ Instance ä¸‹çš„é²æ£’æ€§ï¼‰"},J=({children:t})=>{const[s,r]=X("eda_csv_input","Case,Instances,Nets,m_Base_HPWL,m_Algo1_HPWL,m_Algo2_HPWL,m_Base_TNS,m_Algo1_TNS,m_Algo2_TNS,m_Base_Power,m_Algo1_Power,m_Algo2_Power,m_Base_Runtime,m_Algo1_Runtime,m_Algo2_Runtime,m_Base_Hb_Count,m_Algo1_Hb_Count,m_Algo2_Hb_Count\nsuperblue1_core_very_long,890000,900000,10000,9500,9200,500,480,450,120,118,115,3600,3400,3200,50,45,40\nsuperblue2_top_module,1200000,1250000,20000,19800,21000,0,0,10,250,248,260,7200,7000,7500,120,115,130\nsuperblue3_mac_engine,950000,970000,15000,NaN,14000,100,200,80,180,NaN,175,5400,NaN,5200,80,NaN,75\nsuperblue4_dsp_cluster_huge,2500000,2600000,50000,42000,41000,1000,500,400,600,580,590,14400,12000,11500,300,250,220\nsuperblue5_control_logic,500000,550000,8000,7900,7800,0,0,0,90,92,91,1800,1750,1700,20,18,15\nsuperblue10_mixed_signal,1800000,1900000,12000,11000,10500,50,40,30,300,295,290,9000,8500,8000,150,130,120\nsuperblue18_soc_top_die,2100000,2200000,30000,25000,24000,2000,1800,1500,450,420,410,10800,9500,9000,400,350,300\nbigblue1_network_switch,1500000,1600000,40000,41000,39000,500,600,450,500,510,490,8000,8200,7800,200,210,190\nbigblue3_gpu_core,2800000,2900000,25000,24500,24000,10,5,0,320,315,310,15000,14500,14000,500,480,450\nbigblue4_cpu_cluster_matrix,4000000,4200000,60000,58000,NA,300,280,NaN,800,780,NaN,20000,19000,NA,800,750,NA"),[a,l]=X("eda_llm_config",G),[o,n]=X("eda_active_metric",""),[i,d]=X("eda_qor_weights",{}),[c,x]=e.useState([]),[m,g]=e.useState([]),[p,h]=e.useState([]),[u,b]=e.useState([]),[f,y]=e.useState(!0),[v,j]=e.useState("table"),[w,N]=e.useState(""),[C,k]=e.useState(""),[A,M]=e.useState("all"),[_,S]=e.useState(""),[I,$]=e.useState(""),[P,E]=e.useState(""),[T,F]=e.useState(""),[O,D]=e.useState(""),[W,Y]=e.useState(""),[V,z]=e.useState(new Set),[R,B]=e.useState({key:"Case",direction:"asc"}),[K,U]=e.useState({visible:!1,x:0,y:0,title:"",lines:[]}),[H,J]=e.useState(null),[Q,ee]=e.useState(null),[te,se]=e.useState(!1),[re,ae]=e.useState(""),[le,oe]=e.useState(""),[ne,ie]=e.useState(""),[de,ce]=e.useState(!1),[xe,me]=e.useState(!1),ge=e.useCallback((e=s)=>{const{data:t,algos:r,metrics:a,metaColumns:l}=(e=>{const t=e.trim().split("\n");if(t.length<2)return{data:[],algos:[],metrics:[],metaColumns:[]};const s=t[0].split(",").map(e=>e.trim()),r=new Set,a=new Set,l=[];s.forEach(e=>{if("case"!==e.toLowerCase())if(e.startsWith("m_")){const t=e.substring(2),s=t.indexOf("_");s>0&&(r.add(t.substring(0,s)),a.add(t.substring(s+1)))}else l.push(e)});const o=Array.from(r),n=Array.from(a);return{data:t.slice(1).map(e=>{var t;const r=e.split(","),a={Case:null==(t=r[0])?void 0:t.trim(),raw:{},meta:{}},i={};return s.forEach((e,t)=>{i[e]=r[t]?r[t].trim():""}),l.forEach(e=>{a.meta[e]=i[e]}),n.forEach(e=>{a.raw[e]={},o.forEach(t=>{const s=i[`m_${t}_${e}`];if(s&&"NA"!==s.toUpperCase()&&"NAN"!==s.toUpperCase()){const r=parseFloat(s);a.raw[e][t]=isNaN(r)?null:r}else a.raw[e][t]=null})}),a}).filter(e=>e.Case),algos:o,metrics:n,metaColumns:l}})(e);x(t),h(r),g(a),b(l),r.length>0&&!r.includes(w)&&N(r[0]),r.length>1&&!r.includes(C)&&k(r[1]||r[0]),a.length>0&&!a.includes(o)&&n(a[0]),a.length>0&&!a.includes(T)&&F(a[0]),a.length>1&&!a.includes(O)&&D(a[1]||a[0]),a.length>2&&!a.includes(W)&&Y(a[2]||a[0]);const i=l.find(e=>"instances"===e.toLowerCase()||"instance"===e.toLowerCase());i&&B({key:i,direction:"desc"}),z(new Set(t.map(e=>e.Case))),ae(""),oe(""),ie("")},[s,w,C,o,T,O,W]);e.useEffect(()=>{ge()},[]),e.useEffect(()=>{if(m.length>0){const e={...i};let t=!1;const s=+(100/m.length).toFixed(2);m.forEach(r=>{void 0===e[r]&&(e[r]=s,t=!0)}),t&&d(e)}},[m]);const pe=e.useMemo(()=>0!==c.length&&o&&w&&C?q(o,w,C,c,V):null,[c,V,o,w,C]),he=e.useMemo(()=>0!==c.length&&w&&C?m.map(e=>({metric:e,stats:q(e,w,C,c,V)})):[],[c,V,m,w,C]),ue=e.useCallback(e=>{B(t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"}))},[]),be=e.useMemo(()=>{const e=[...c];return e.sort((e,t)=>{var s,r,a,l,n,i;let d,c;if("Case"===R.key)d=e.Case,c=t.Case;else if(u.includes(R.key))d=parseFloat(e.meta[R.key])||e.meta[R.key],c=parseFloat(t.meta[R.key])||t.meta[R.key];else if("imp"===R.key){const n=null==(s=e.raw[o])?void 0:s[w],i=null==(r=e.raw[o])?void 0:r[C],x=null==(a=t.raw[o])?void 0:a[w],m=null==(l=t.raw[o])?void 0:l[C],g=(e,t)=>null==e||null==t?-1/0:0===e&&0===t?0:0===e&&t>0?-100:(e-t)/e*100;d=g(n,i),c=g(x,m)}else d=null==(null==(n=e.raw[o])?void 0:n[R.key])?-1/0:e.raw[o][R.key],c=null==(null==(i=t.raw[o])?void 0:i[R.key])?-1/0:t.raw[o][R.key];return d<c?"asc"===R.direction?-1:1:d>c?"asc"===R.direction?1:-1:0}),e},[c,R,o,w,C,u]),fe=e.useMemo(()=>be.filter(e=>{var t,s;const r=V.has(e.Case),a=null==(t=e.raw[o])?void 0:t[w],l=null==(s=e.raw[o])?void 0:s[C],n=null==a||null==l;let i=0,d="normal";if(!n){i=0===a?0===l?0:-100:(a-l)/a*100;const t=null==pe?void 0:pe.validCases.find(t=>t.Case===e.Case);t&&(d=t.outlierType)}return"degraded"===A?!n&&i<0:"outlier"===A?"positive"===d||"negative"===d:"filtered"!==A||(n||!r)}),[be,A,o,w,C,pe,V]),ye=e.useCallback(e=>{z(t=>{const s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},[]),ve=e.useCallback(()=>{V.size===c.length?z(new Set):z(new Set(c.map(e=>e.Case)))},[V,c]),je=e.useCallback(()=>{const e={},t=+(100/m.length).toFixed(2);m.forEach(s=>e[s]=t),d(e)},[m]),we=e.useCallback(e=>{if(!K.visible)return;const t=e.currentTarget.getBoundingClientRect();U(s=>({...s,x:e.clientX-t.left,y:e.clientY-t.top}))},[K.visible]),Ne={csvInput:s,setCsvInput:r,llmConfig:a,setLlmConfig:l,activeMetric:o,setActiveMetric:n,parsedData:c,setParsedData:x,availableMetrics:m,setAvailableMetrics:g,availableAlgos:p,setAvailableAlgos:h,metaColumns:u,setMetaColumns:b,isSidebarOpen:f,setIsSidebarOpen:y,activeTab:v,setActiveTab:j,baseAlgo:w,setBaseAlgo:N,compareAlgo:C,setCompareAlgo:k,tableFilter:A,setTableFilter:M,corrX:_,setCorrX:S,corrY:I,setCorrY:$,trendBase:P,setTrendBase:E,paretoX:T,setParetoX:F,paretoY:O,setParetoY:D,paretoZ:W,setParetoZ:Y,qorWeights:i,setQorWeights:d,selectedCases:V,setSelectedCases:z,sortConfig:R,setSortConfig:B,tooltipState:K,setTooltipState:U,deepDiveCase:H,setDeepDiveCase:J,hoveredCase:Q,setHoveredCase:ee,isAnalyzing:te,setIsAnalyzing:se,aiInsights:re,setAiInsights:ae,displayInsights:le,setDisplayInsights:oe,aiError:ne,setAiError:ie,showAiConfig:de,setShowAiConfig:ce,showAiPanel:xe,setShowAiPanel:me,stats:pe,allMetricsStats:he,sortedTableData:be,filteredTableData:fe,runAnalysis:ge,handleSort:ue,toggleCase:ye,toggleAll:ve,equalizeWeights:je,handleChartMouseMove:we};return L.jsx(Z.Provider,{value:Ne,children:t})},Q=({isSidebarOpen:e,onToggleSidebar:a})=>L.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[L.jsxs("div",{className:"flex items-center gap-3",children:[L.jsx("button",{onClick:a,className:"p-2 hover:bg-indigo-50 rounded-lg text-gray-500 hover:text-indigo-600 transition-colors border border-gray-200",title:e?"éšè—æ•°æ®è¾“å…¥é¢æ¿":"æ˜¾ç¤ºæ•°æ®è¾“å…¥é¢æ¿",children:e?L.jsx(t,{className:"w-5 h-5"}):L.jsx(s,{className:"w-5 h-5"})}),L.jsxs("div",{children:[L.jsxs("h1",{className:"text-2xl font-black text-gray-900 flex items-center gap-2",children:[L.jsx(r,{className:"w-7 h-7 text-indigo-600"}),"EDA ç®—æ³•è¯„ä¼°å™¨"]}),L.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"ä¸“ä¸šç‰ˆ v1.0 - å¤šç»´åº¦å¯¹æ¯”åˆ†æä¸æ™ºèƒ½è¯Šæ–­"})]})]}),L.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400",children:[L.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-full font-bold border border-indigo-100",children:"React + Vite"}),L.jsx("span",{className:"px-3 py-1.5 bg-gray-100 text-gray-600 rounded-full font-bold",children:"æœ¬åœ°è¿è¡Œ"})]})]}),ee=({text:e,content:t,className:s="w-3.5 h-3.5 text-gray-400 hover:text-indigo-500 transition-colors",tooltipWidth:r="w-64",position:l="bottom-right"})=>{let o="left-1/2 -translate-x-1/2",n="left-1/2 -translate-x-1/2";return"bottom-right"===l?(o="left-0",n="left-2"):"bottom-left"===l?(o="right-0",n="right-2"):"right-center"===l&&(o="left-full top-1/2 -translate-y-1/2 ml-2",n="right-full top-1/2 -translate-y-1/2 border-r-gray-800 border-b-transparent border-t-transparent border-l-transparent"),L.jsxs("div",{className:"group/help relative inline-flex items-center ml-1 cursor-help z-50",children:[L.jsx(a,{className:s}),L.jsxs("div",{className:`absolute ${"right-center"===l?o:"top-full mt-2"} hidden group-hover/help:block ${r} p-3 bg-gray-900/95 backdrop-blur-sm text-gray-100 text-xs rounded-lg shadow-xl normal-case font-normal text-left pointer-events-none border border-gray-700 ${"right-center"!==l?o:""}`,children:["right-center"!==l&&L.jsx("div",{className:`absolute bottom-full mb-0 ${n} border-4 border-transparent border-b-gray-800`}),"right-center"===l&&L.jsx("div",{className:`absolute ${n} border-4`}),t||e]})]})},te=({isOpen:t,csvInput:s,onCsvChange:r,onRunAnalysis:a})=>{const i=e.useRef(null);return t?L.jsxs("div",{className:"xl:col-span-3 bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex flex-col gap-4 transition-all duration-300",children:[L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("h2",{className:"text-sm font-bold text-gray-700 flex items-center gap-2",children:[L.jsx(l,{className:"w-4 h-4 text-indigo-500"}),"CSV æ•°æ®æº"]}),L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("p",{children:L.jsx("b",{children:"æ ¼å¼è¦æ±‚:"})}),L.jsx("p",{children:"â€¢ ç¬¬ä¸€åˆ—ä¸º Case åç§°"}),L.jsx("p",{children:"â€¢ æŒ‡æ ‡åˆ—æ ¼å¼: m_ç®—æ³•å_æŒ‡æ ‡å"}),L.jsx("p",{children:"â€¢ æ”¯æŒå¤šä¸ªç®—æ³•å¯¹æ¯”"})]}),position:"right-center"})]}),L.jsx("textarea",{value:s,onChange:e=>r(e.target.value),className:"flex-1 min-h-[300px] w-full p-3 border border-gray-200 rounded-lg text-xs font-mono focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none bg-gray-50",placeholder:"ç²˜è´´ CSV æ•°æ®æˆ–ä¸Šä¼ æ–‡ä»¶..."}),L.jsxs("div",{className:"flex gap-2",children:[L.jsx("input",{ref:i,type:"file",accept:".csv,.txt",onChange:e=>{const t=e.target.files[0];if(!t)return;const s=new FileReader;s.onload=e=>{r(e.target.result),a(e.target.result)},s.readAsText(t),e.target.value=null},className:"hidden"}),L.jsxs("button",{onClick:()=>{var e;return null==(e=i.current)?void 0:e.click()},className:"flex-1 py-2 px-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2 border border-gray-200",children:[L.jsx(o,{className:"w-4 h-4"}),"ä¸Šä¼ æ–‡ä»¶"]}),L.jsxs("button",{onClick:()=>a(),className:"flex-1 py-2 px-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-bold transition-colors flex items-center justify-center gap-2 shadow-sm",children:[L.jsx(n,{className:"w-4 h-4"}),"è¿è¡Œåˆ†æ"]})]})]}):null},se=({availableMetrics:e,activeMetric:t,onMetricChange:s,availableAlgos:r,baseAlgo:a,compareAlgo:l,onBaseAlgoChange:o,onCompareAlgoChange:n})=>L.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200 flex flex-col sm:flex-row justify-between items-center gap-4",children:L.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("label",{className:"text-xs font-bold text-gray-600",children:"ç„¦ç‚¹æŒ‡æ ‡:"}),L.jsx("select",{value:t,onChange:e=>s(e.target.value),className:"text-sm font-bold border-gray-300 rounded-lg py-1.5 px-3 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",children:e.map(e=>L.jsx("option",{value:e,children:e},e))})]}),L.jsx("div",{className:"h-6 w-px bg-gray-200"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("label",{className:"text-xs font-bold text-gray-600",children:"åŸºçº¿ç®—æ³•:"}),L.jsx("select",{value:a,onChange:e=>o(e.target.value),className:"text-sm font-bold border-gray-300 rounded-lg py-1.5 px-3 focus:ring-indigo-500 focus:border-indigo-500 bg-white shadow-sm",children:r.map(e=>L.jsx("option",{value:e,children:e},e))})]}),L.jsx("span",{className:"text-gray-400 font-bold",children:"vs"}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("label",{className:"text-xs font-bold text-gray-600",children:"å¯¹æ¯”ç®—æ³•:"}),L.jsx("select",{value:l,onChange:e=>n(e.target.value),className:"text-sm font-bold border-indigo-300 bg-indigo-50 text-indigo-700 rounded-lg py-1.5 px-3 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm",children:r.map(e=>L.jsx("option",{value:e,children:e},e))})]})]})}),re=({config:e,columnKey:t})=>e.key!==t?L.jsx(i,{className:"w-3 h-3 text-gray-300 inline ml-1 opacity-50"}):"asc"===e.direction?L.jsx(d,{className:"w-3 h-3 text-indigo-600 inline ml-1"}):L.jsx(c,{className:"w-3 h-3 text-indigo-600 inline ml-1"}),ae=({isOpen:e,caseData:t,baseAlgo:s,compareAlgo:r,availableMetrics:a,onClose:l})=>{if(!e||!t)return null;const o=a.map(e=>{var a,l;const o=null==(a=t.raw[e])?void 0:a[s],n=null==(l=t.raw[e])?void 0:l[r];if(null==o||null==n)return null;return{metric:e,bVal:o,cVal:n,imp:0===o?0===n?0:-100:(o-n)/o*100}}).filter(e=>null!==e),n=Math.max(...o.map(e=>Math.abs(e.imp)),1);return L.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[200] p-4",onClick:l,children:L.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[L.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50 flex justify-between items-center",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"font-bold text-xl text-gray-900 flex items-center gap-2",children:[L.jsx(x,{className:"w-5 h-5 text-indigo-600"}),"å•ä¾‹æ·±åº¦é€è§†"]}),L.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Case: ",L.jsx("span",{className:"font-bold text-indigo-700",children:t.Case})]})]}),L.jsx("button",{onClick:l,className:"p-2 hover:bg-white rounded-lg text-gray-400 hover:text-gray-600 transition-colors",children:L.jsx(m,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[L.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[L.jsxs("div",{children:[L.jsxs("h4",{className:"font-bold text-gray-700 mb-3 flex items-center gap-2",children:[L.jsx(g,{className:"w-4 h-4 text-indigo-500"}),"å±æ€§ä¿¡æ¯"]}),L.jsx("div",{className:"space-y-2",children:Object.entries(t.meta).map(([e,t])=>L.jsxs("div",{className:"flex justify-between text-sm py-1 border-b border-gray-100",children:[L.jsx("span",{className:"text-gray-500",children:e}),L.jsx("span",{className:"font-mono text-gray-700",children:t||"-"})]},e))})]}),L.jsxs("div",{children:[L.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:"å¤šç»´é›·è¾¾å›¾"}),L.jsx("div",{className:"aspect-square relative bg-gray-50 rounded-lg border border-gray-200",children:L.jsx("svg",{className:"w-full h-full overflow-visible",viewBox:"-100 -100 200 200",preserveAspectRatio:"xMidYMid meet",children:(()=>{const e=o.length;if(e<3)return L.jsx("text",{x:"0",y:"0",textAnchor:"middle",fill:"#9ca3af",fontSize:"10",children:"éœ€è¦è‡³å°‘3ä¸ªæŒ‡æ ‡"});const t=(e,t)=>({x:t*Math.sin(e),y:-t*Math.cos(e)}),s=Array.from({length:e}).map((s,r)=>{const a=t(2*Math.PI*r/e,60);return`${a.x},${a.y}`}).join(" "),r=o.map((s,r)=>{const a=60+s.imp/n*30;const l=t(2*Math.PI*r/e,a);return`${l.x},${l.y}`}).join(" ");return L.jsxs(L.Fragment,{children:[L.jsx("polygon",{points:s,fill:"none",stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:"2 2"}),L.jsx("polygon",{points:r,fill:"#818cf8",fillOpacity:"0.3",stroke:"#4f46e5",strokeWidth:"2"}),o.map((s,r)=>{const a=2*Math.PI*r/e,l=t(a,85),o=t(a,95);return L.jsxs("g",{children:[L.jsx("line",{x1:"0",y1:"0",x2:l.x,y2:l.y,stroke:"#d1d5db",strokeWidth:"0.5"}),L.jsx("text",{x:o.x,y:o.y,fontSize:"5",fontWeight:"bold",fill:"#4b5563",textAnchor:"middle",dominantBaseline:"middle",children:s.metric})]},r)})]})})()})})]})]}),L.jsxs("div",{className:"mt-6",children:[L.jsx("h4",{className:"font-bold text-gray-700 mb-3",children:"æŒ‡æ ‡è¯¦æƒ…"}),L.jsx("div",{className:"overflow-x-auto",children:L.jsxs("table",{className:"min-w-full text-sm",children:[L.jsx("thead",{className:"bg-gray-100",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-2 text-left font-bold text-gray-600",children:"æŒ‡æ ‡"}),L.jsx("th",{className:"px-4 py-2 text-right font-bold text-gray-600",children:s}),L.jsx("th",{className:"px-4 py-2 text-right font-bold text-gray-600",children:r}),L.jsx("th",{className:"px-4 py-2 text-right font-bold text-gray-600",children:"æ”¹è¿›ç‡"})]})}),L.jsx("tbody",{className:"divide-y divide-gray-100",children:o.map(e=>L.jsxs("tr",{className:"hover:bg-gray-50",children:[L.jsx("td",{className:"px-4 py-2 font-bold text-gray-800",children:e.metric}),L.jsx("td",{className:"px-4 py-2 text-right font-mono text-gray-600",children:e.bVal}),L.jsx("td",{className:"px-4 py-2 text-right font-mono font-bold text-indigo-700",children:e.cVal}),L.jsxs("td",{className:"px-4 py-2 text-right font-mono font-bold "+(e.imp>0?"text-emerald-600":e.imp<0?"text-red-600":"text-gray-600"),children:[e.imp>0?"+":"",e.imp.toFixed(2),"%"]})]},e.metric))})]})})]})]})]})})},le={deepseek:{name:"DeepSeek",baseUrl:"https://api.deepseek.com/v1",model:"deepseek-chat",placeholder:"è¾“å…¥ DeepSeek API Key"},gemini:{name:"Google Gemini",baseUrl:"",model:"",placeholder:"è¾“å…¥ Gemini API Key"},openai:{name:"OpenAI",baseUrl:"https://api.openai.com/v1",model:"gpt-4o",placeholder:"è¾“å…¥ OpenAI API Key"},custom:{name:"è‡ªå®šä¹‰ OpenAI å…¼å®¹",baseUrl:"",model:"",placeholder:"è¾“å…¥ API Key"}},oe=({isOpen:t,config:s,onConfigChange:r,onClose:a})=>{const[o,n]=e.useState(s);if(e.useEffect(()=>{n(s)},[s]),!t)return null;const i=(e,t)=>{n(s=>({...s,[e]:t}))},d=le[o.provider]||le.custom;return L.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[200] p-4",onClick:a,children:L.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-hidden flex flex-col animate-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[L.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50 flex justify-between items-center",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"font-bold text-xl text-gray-900 flex items-center gap-2",children:[L.jsx(p,{className:"w-5 h-5 text-indigo-600"}),"AI é…ç½®"]}),L.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"é…ç½® AI æœåŠ¡æä¾›å•†å’Œ API å¯†é’¥"})]}),L.jsx("button",{onClick:a,className:"p-2 hover:bg-white rounded-lg text-gray-400 hover:text-gray-600 transition-colors",children:L.jsx(m,{className:"w-5 h-5"})})]}),L.jsxs("div",{className:"p-6 overflow-y-auto flex-1 space-y-6",children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[L.jsx(h,{className:"w-4 h-4 text-indigo-500"}),"æœåŠ¡æä¾›å•†"]}),L.jsx("select",{value:o.provider,onChange:e=>(e=>{const t=le[e];n(s=>({...s,provider:e,baseUrl:t.baseUrl,model:t.model}))})(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Object.entries(le).map(([e,t])=>L.jsx("option",{value:e,children:t.name},e))})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[L.jsx(u,{className:"w-4 h-4 text-indigo-500"}),"API Key"]}),L.jsx("input",{type:"password",value:o.apiKey,onChange:e=>i("apiKey",e.target.value),placeholder:d.placeholder,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),"gemini"!==o.provider&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[L.jsx(b,{className:"w-4 h-4 text-indigo-500"}),"API Base URL"]}),L.jsx("input",{type:"text",value:o.baseUrl,onChange:e=>i("baseUrl",e.target.value),placeholder:"https://api.openai.com/v1",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"æ¨¡å‹åç§°"}),L.jsx("input",{type:"text",value:o.model,onChange:e=>i("model",e.target.value),placeholder:"gpt-4o",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]}),L.jsxs("div",{children:[L.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[L.jsx(l,{className:"w-4 h-4 text-indigo-500"}),"ç³»ç»Ÿæç¤ºè¯"]}),L.jsx("textarea",{value:o.systemPrompt,onChange:e=>i("systemPrompt",e.target.value),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm"})]}),L.jsxs("div",{children:[L.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"ç”¨æˆ·æç¤ºè¯æ¨¡æ¿"}),L.jsx("textarea",{value:o.userPrompt,onChange:e=>i("userPrompt",e.target.value),rows:6,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm font-mono"})]})]}),L.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-end gap-3",children:[L.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-700 hover:bg-gray-200 rounded-lg font-bold transition-colors",children:"å–æ¶ˆ"}),L.jsx("button",{onClick:()=>{r(o),a()},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold transition-colors shadow-sm",children:"ä¿å­˜é…ç½®"})]})]})})},ne=({stats:e,activeMetric:t,handleChartMouseMove:s,hoveredCase:r,setHoveredCase:a,setTooltipState:l})=>e?L.jsx("div",{className:"p-6 h-full flex flex-col justify-center",onMouseMove:s,children:L.jsxs("div",{className:"bg-gray-50/50 p-8 rounded-xl border border-gray-200 max-w-4xl mx-auto w-full shadow-sm",children:[L.jsxs("div",{className:"flex justify-between items-center mb-8",children:[L.jsxs("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-1",children:["æ”¹è¿›ç‡åˆ†å¸ƒç®±çº¿å›¾ (",t,")",L.jsx(ee,{content:"ç®±çº¿å›¾ç›´è§‚å±•ç¤ºäº†å•ä¸ªæŒ‡æ ‡åœ¨æ‰€æœ‰ Case ä¸­çš„å®è§‚åˆ†å¸ƒæƒ…å†µã€‚é•¿æ¡é˜´å½±è¦†ç›–äº† 50% çš„æ ¸å¿ƒå¯†é›†åŒº(IQR)ï¼Œæ•£è½åœ¨é˜´å½±è¿œç«¯çš„æ•£ç‚¹å³ä¸ºå¼‚å¸¸ç¦»ç¾¤ç‚¹ï¼Œç ”å‘å·¥ç¨‹å¸ˆéœ€è¦é‡ç‚¹æ’æŸ¥è¿™äº›ç‚¹æ˜¯å¦å¼•å…¥äº†ç‰¹å®šçš„ Bugã€‚æ‚¬æµ®æ•°æ®ç‚¹å¯è”åŠ¨è¡¨æ ¼é«˜äº®ã€‚",tooltipWidth:"w-72",position:"right-center"})]}),L.jsxs("span",{className:"text-xs font-semibold text-gray-500 bg-white px-3 py-1.5 rounded-lg border shadow-sm flex items-center gap-2",children:[L.jsx("span",{className:"w-3 h-3 rounded-full bg-purple-500"})," å¼‚å¸¸ç¦»ç¾¤ç‚¹",L.jsx("span",{className:"w-3 h-3 rounded-full bg-indigo-500 ml-2"})," æ ¸å¿ƒå¯†é›†åŒº"]})]}),L.jsxs("div",{className:"relative w-full h-80 border-l-2 border-b-2 border-gray-400 mt-2",children:[L.jsxs("div",{className:"absolute -left-14 top-0 text-xs font-bold text-gray-500 text-right w-12",children:[Math.ceil(e.maxImp+2),"%"]}),L.jsx("div",{className:"absolute -left-14 top-1/2 -translate-y-1/2 text-xs font-bold text-gray-500 text-right w-12",children:"0%"}),L.jsxs("div",{className:"absolute -left-14 bottom-0 text-xs font-bold text-gray-500 text-right w-12",children:[Math.floor(e.minImp-2),"%"]}),L.jsx("svg",{className:"w-full h-full overflow-visible",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(()=>{const t=Math.max(Math.abs(e.maxImp),Math.abs(e.minImp))+5,s=e=>50-e/t*50;return L.jsxs(L.Fragment,{children:[L.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#9ca3af",strokeWidth:"0.5",strokeDasharray:"2 2"}),L.jsx("rect",{x:"0",y:s(e.q3),width:"100",height:Math.max(0,s(e.q1)-s(e.q3)),fill:"#e0e7ff",opacity:"0.6"}),L.jsx("line",{x1:"0",y1:s(e.median),x2:"100",y2:s(e.median),stroke:"#4f46e5",strokeWidth:"0.8",strokeDasharray:"1 1"}),e.validCases.map((t,o)=>{const n=t.imp,i=5+o/(e.nValid-1||1)*90,d=s(n),c=n>e.outlierUpper||n<e.outlierLower,x=r===t.Case;let m="#6366f1";return n>e.outlierUpper&&(m="#9333ea"),n<e.outlierLower&&(m="#dc2626"),L.jsx("circle",{cx:i,cy:d,r:x?"4":c?"2.5":"1.5",fill:m,stroke:x?"#fff":"none",strokeWidth:x?"0.5":"0",className:"transition-all duration-200 cursor-pointer "+(x?"animate-pulse":"hover:r-3"),onMouseEnter:()=>{a(t.Case),l({visible:!0,x:0,y:0,title:t.Case,lines:["çŠ¶æ€: "+(c?n>0?"æ˜¾è‘—ä¼˜åŒ–(å¼‚å¸¸)":"ä¸¥é‡é€€åŒ–(å¼‚å¸¸)":n>0?"ä¼˜åŒ–":"é€€åŒ–"),`æ”¹è¿›: ${n>0?"+":""}${n.toFixed(2)}%`,`Base: ${t.bVal} | Comp: ${t.cVal}`]})},onMouseLeave:()=>{a(null),l(e=>({...e,visible:!1}))}},t.Case)})]})})()})]})]})}):null,ie=e=>{if(null==e||""===e)return e;const t=Number(e);return isNaN(t)?e:Math.abs(t)>=1e6?(t/1e6).toFixed(2)+"M":Math.abs(t)>=1e3?(t/1e3).toFixed(1)+"K":t.toString()},de=({parsedData:e,selectedCases:t,metaColumns:s,availableMetrics:r,corrX:a,corrY:l,setCorrX:o,setCorrY:n,handleChartMouseMove:i,hoveredCase:d,setHoveredCase:c,setTooltipState:x,baseAlgo:m,compareAlgo:g})=>0===e.length?null:L.jsxs("div",{className:"p-6 h-full flex flex-col justify-center max-w-5xl mx-auto w-full",onMouseMove:i,children:[L.jsxs("div",{className:"w-full flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 bg-white p-5 rounded-xl border border-gray-200 flex-shrink-0 shadow-sm gap-4",children:[L.jsx("div",{children:L.jsxs("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-1",children:["ç‰¹å¾ç›¸å…³æ€§æ•£ç‚¹åˆ†æ",L.jsx(ee,{content:"å‘ç°æ·±å±‚ç‰©ç†è§„å¾‹ï¼šæ”¯æŒåˆ†æã€å±æ€§ vs æŒ‡æ ‡ã€‘(å¦‚: è§„æ¨¡è¶Šå¤§æ—¶åºæ˜¯å¦è¶Šå·®?)ï¼Œä¹Ÿæ”¯æŒåˆ†æã€æŒ‡æ ‡ vs æŒ‡æ ‡ã€‘(å¦‚: HPWLä¼˜åŒ–æ˜¯å¦å¿…ç„¶ä¼´éšåŠŸè€—ä¸Šå‡?)ã€‚",tooltipWidth:"w-80",position:"right-center"})]})}),L.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200 shadow-sm",children:[L.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Xè½´ (ç‰¹å¾/æŒ‡æ ‡):"}),L.jsxs("select",{value:a,onChange:e=>o(e.target.value),className:"text-xs font-semibold border-gray-300 rounded py-1 focus:ring-indigo-500 max-w-[120px]",children:[L.jsx("optgroup",{label:"å±æ€§ç‰¹å¾ (Meta)",children:s.map(e=>L.jsx("option",{value:e,children:e},`mx-${e}`))}),L.jsx("optgroup",{label:"æ¯”å¯¹æŒ‡æ ‡æ”¹è¿›ç‡ (Metrics)",children:r.map(e=>L.jsxs("option",{value:e,children:[e," æ”¹è¿›ç‡"]},`tx-${e}`))})]}),L.jsx("span",{className:"text-gray-300 mx-1",children:"|"}),L.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Yè½´ (åˆ†æç›®æ ‡):"}),L.jsx("select",{value:l,onChange:e=>n(e.target.value),className:"text-xs font-semibold border-gray-300 rounded py-1 focus:ring-indigo-500 max-w-[120px]",children:r.map(e=>L.jsxs("option",{value:e,children:[e," æ”¹è¿›ç‡"]},`ty-${e}`))})]})]}),L.jsxs("div",{className:"relative w-full max-w-4xl mx-auto flex-1 max-h-[500px] border-b-2 border-l-2 border-gray-400 mt-4 bg-white rounded-lg",children:[L.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 text-sm font-bold text-gray-600",children:[a||"X Axis"," ",r.includes(a)?"(%)":""," â†’"]}),L.jsxs("div",{className:"absolute -left-14 top-1/2 -translate-y-1/2 -rotate-90 text-sm font-bold text-gray-600",children:[l||"Y Axis"," æ”¹è¿›ç‡ (%) â†’ "]}),a&&l?L.jsx("svg",{className:"w-full h-full overflow-visible",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:(()=>{const s=r.includes(a),o=e.filter(e=>t.has(e.Case)).map(e=>{var t,r,o,n;let i;if(s){const s=null==(t=e.raw[a])?void 0:t[m],l=null==(r=e.raw[a])?void 0:r[g];if(null==s||null==l)return null;i=0===s?0===l?0:-100:(s-l)/s*100}else i=e.meta[a];if(null==i)return null;const d=parseFloat(i);if(isNaN(d))return null;const c=null==(o=e.raw[l])?void 0:o[m],x=null==(n=e.raw[l])?void 0:n[g];if(null==c||null==x)return null;let p=0===c?0===x?0:-100:(c-x)/c*100;return{case:e.Case,xVal:d,impY:p,bx:c,cx:x}}).filter(e=>null!==e);if(0===o.length)return null;const n=o.map(e=>e.xVal),i=Math.min(...n),p=Math.max(...n),h=p-i||1,u=1.2*Math.max(...o.map(e=>Math.abs(e.impY)))||20;return L.jsxs(L.Fragment,{children:[L.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#9ca3af",strokeWidth:"0.5",strokeDasharray:"4 4"}),L.jsx("text",{x:"0",y:"105",fontSize:"4",fill:"#6b7280",textAnchor:"start",children:s?`${i.toFixed(1)}%`:ie(i)}),L.jsx("text",{x:"100",y:"105",fontSize:"4",fill:"#6b7280",textAnchor:"end",children:s?`${p.toFixed(1)}%`:ie(p)}),o.map(e=>{const t=d===e.case,r=(e.xVal-i)/h*100,o=50-e.impY/u*50;let n="#4f46e5";return e.impY>0&&(n="#059669"),e.impY<0&&(n="#dc2626"),L.jsx("circle",{cx:r,cy:o,r:t?"4":"2",fill:n,stroke:"#fff",strokeWidth:t?"0.5":"0.2",className:"transition-all duration-200 cursor-pointer "+(t?"animate-pulse":"hover:r-3"),onMouseEnter:()=>{c(e.case),x({visible:!0,x:0,y:0,title:e.case,lines:[`${a}: ${s?`${e.xVal>0?"+":""}${e.xVal.toFixed(2)}%`:ie(e.xVal)}`,`${l} æ”¹è¿›ç‡: ${e.impY>0?"+":""}${e.impY.toFixed(2)}%`]})},onMouseLeave:()=>{c(null),x(e=>({...e,visible:!1}))}},`corr-${e.case}`)})]})})()}):L.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 font-bold",children:"è¯·åœ¨ä¸Šæ–¹é€‰æ‹© X è½´ä¸ Y è½´è¿›è¡Œç›¸å…³æ€§åˆ†æ"})]})]}),ce=({parsedData:e,selectedCases:t,availableMetrics:s,paretoX:r,paretoY:a,paretoZ:l,setParetoX:o,setParetoY:n,setParetoZ:i,handleChartMouseMove:d,hoveredCase:c,setHoveredCase:x,setTooltipState:m,baseAlgo:g,compareAlgo:p})=>0===e.length?null:L.jsxs("div",{className:"p-6 h-full flex flex-col justify-center max-w-5xl mx-auto w-full",onMouseMove:d,children:[L.jsxs("div",{className:"w-full flex flex-col lg:flex-row justify-between items-start lg:items-center mb-6 bg-white p-5 rounded-xl border border-gray-200 flex-shrink-0 shadow-sm gap-4",children:[L.jsx("div",{children:L.jsxs("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-1",children:["Pareto Front å¤šç»´æ°”æ³¡åˆ†æ",L.jsx(ee,{content:"å¸•ç´¯æ‰˜å›¾æ­ç¤ºäº†ç›®æ ‡ä¹‹é—´çš„ç«äº‰å…³ç³»(Trade-off)ã€‚å³ä¸Šè§’ä¸ºåŒèµ¢ç‚¹ï¼Œå·¦ä¸‹è§’ä¸ºåŒè¾“ç‚¹ã€‚ä½ å¯ä»¥é€‰æ‹©ç¬¬ä¸‰ä¸ªæŒ‡æ ‡æ˜ å°„ä¸ºæ°”æ³¡çš„å¤§å°(Radius)ï¼Œåœ¨åŒä¸€ä¸ª 2D å¹³é¢å†…ç›´è§‚é™ç»´å¯¹æ¯” 3 ä¸ªç›®æ ‡çš„å¾—å¤±ã€‚è¿™ä¹Ÿæ˜¯é¿å…å¤æ‚3Dé®æŒ¡çš„å·¥ä¸šç•Œé¦–é€‰æ–¹æ¡ˆã€‚",tooltipWidth:"w-80",position:"right-center"})]})}),L.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-lg border border-gray-200 shadow-sm",children:[L.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Xè½´:"}),L.jsxs("select",{value:r,onChange:e=>o(e.target.value),className:"text-xs font-semibold border-gray-300 rounded py-1 focus:ring-indigo-500 max-w-[100px]",children:[L.jsx("option",{value:"",children:"--"}),s.map(e=>L.jsx("option",{value:e,children:e},e))]}),L.jsx("span",{className:"text-gray-300 mx-1",children:"|"}),L.jsx("span",{className:"text-xs font-bold text-gray-600",children:"Yè½´:"}),L.jsxs("select",{value:a,onChange:e=>n(e.target.value),className:"text-xs font-semibold border-gray-300 rounded py-1 focus:ring-indigo-500 max-w-[100px]",children:[L.jsx("option",{value:"",children:"--"}),s.map(e=>L.jsx("option",{value:e,children:e},e))]}),L.jsx("span",{className:"text-gray-300 mx-1",children:"|"}),L.jsxs("span",{className:"text-xs font-bold text-indigo-600 flex items-center gap-1",children:[L.jsx(f,{className:"w-3 h-3"}),"æ°”æ³¡å¤§å°(Z):"]}),L.jsxs("select",{value:l,onChange:e=>i(e.target.value),className:"text-xs font-semibold border-indigo-300 bg-indigo-50 text-indigo-700 rounded py-1 focus:ring-indigo-500 max-w-[100px]",children:[L.jsx("option",{value:"",children:"-- (å…³é—­)"}),s.map(e=>L.jsx("option",{value:e,children:e},e))]})]})]}),L.jsxs("div",{className:"relative w-full max-w-4xl mx-auto flex-1 max-h-[500px] border-b-2 border-l-2 border-gray-400 mt-4 bg-white rounded-lg",children:[L.jsxs("div",{className:"absolute -bottom-10 left-1/2 -translate-x-1/2 text-sm font-bold text-gray-600",children:[r," æ”¹è¿›ç‡ (%) â†’ "]}),L.jsxs("div",{className:"absolute -left-12 top-1/2 -translate-y-1/2 -rotate-90 text-sm font-bold text-gray-600",children:[a," æ”¹è¿›ç‡ (%) â†’ "]}),r&&a?L.jsxs("svg",{className:"w-full h-full overflow-visible",viewBox:"-100 -100 200 200",preserveAspectRatio:"none",children:[L.jsx("line",{x1:"-100",y1:"0",x2:"100",y2:"0",stroke:"#9ca3af",strokeWidth:"0.5",strokeDasharray:"4 4"}),L.jsx("line",{x1:"0",y1:"-100",x2:"0",y2:"100",stroke:"#9ca3af",strokeWidth:"0.5",strokeDasharray:"4 4"}),L.jsx("rect",{x:"0",y:"-100",width:"100",height:"100",fill:"#10b981",opacity:"0.08"}),L.jsx("rect",{x:"-100",y:"0",width:"100",height:"100",fill:"#ef4444",opacity:"0.05"}),(()=>{const s=e.filter(e=>t.has(e.Case)).map(e=>{var t,s,o,n,i,d;const c=null==(t=e.raw[r])?void 0:t[g],x=null==(s=e.raw[r])?void 0:s[p],m=null==(o=e.raw[a])?void 0:o[g],h=null==(n=e.raw[a])?void 0:n[p];let u=1,b=1;if(l&&(u=null==(i=e.raw[l])?void 0:i[g],b=null==(d=e.raw[l])?void 0:d[p]),null==c||null==x||null==m||null==h||l&&(null==u||null==b))return null;let f=0===c?0===x?0:-100:(c-x)/c*100,y=0===m?0===h?0:-100:(m-h)/m*100,v=0;return l&&(v=0===u?0===b?0:-100:(u-b)/u*100),{case:e.Case,impX:f,impY:y,impZ:v}}).filter(e=>null!==e);let o=0,n=0;if(l){const e=s.map(e=>e.impZ);o=Math.min(...e),n=Math.max(...e)}return s.sort((e,t)=>l?Math.abs(t.impZ)-Math.abs(e.impZ):0),s.map(e=>{const t=c===e.case,s=Math.max(-100,Math.min(100,4*e.impX)),i=-Math.max(-100,Math.min(100,4*e.impY));let d="#4f46e5";e.impX>0&&e.impY>0?d="#059669":e.impX<0&&e.impY<0&&(d="#dc2626");let g=2.5;if(l){g=2+Math.abs(e.impZ)/(Math.max(Math.abs(o),Math.abs(n))||1)*8}let p=[`${r}: ${e.impX>0?"+":""}${e.impX.toFixed(2)}%`,`${a}: ${e.impY>0?"+":""}${e.impY.toFixed(2)}%`];return l&&p.push(`${l}: ${e.impZ>0?"+":""}${e.impZ.toFixed(2)}% (æ°”æ³¡å¤§å°)`),L.jsx("circle",{cx:s,cy:i,r:t?g+2:g,fill:d,stroke:"#fff",strokeWidth:t?"1":"0.5",fillOpacity:l?.75:1,className:"transition-all duration-200 cursor-pointer "+(t?"animate-pulse":"hover:stroke-gray-300"),onMouseEnter:()=>{x(e.case),m({visible:!0,x:0,y:0,title:e.case,lines:p})},onMouseLeave:()=>{x(null),m(e=>({...e,visible:!1}))}},`pareto-${e.case}`)})})()]}):L.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 font-bold",children:"è¯·åœ¨ä¸Šæ–¹é€‰æ‹© X è½´ä¸ Y è½´è¿›è¡Œå¸•ç´¯æ‰˜åˆ†æ"})]})]}),xe=({allMetricsStats:e,baseAlgo:t,compareAlgo:s})=>e&&0!==e.length?L.jsxs("div",{className:"p-6 max-w-5xl mx-auto h-full flex flex-col w-full",children:[L.jsx("div",{className:"flex justify-between items-center mb-10 bg-white p-5 rounded-xl border border-gray-200 shadow-sm flex-shrink-0",children:L.jsx("div",{children:L.jsxs("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-1",children:["å…¨å±€å¤šç»´é›·è¾¾å›¾ (Geomean Improvement)",L.jsx(ee,{content:"é›·è¾¾å›¾(Spider Chart)æ˜¯å¤šç›®æ ‡ä¼˜åŒ–(MOO)é¢†åŸŸçš„æ ‡å‡†å·¥å…·ã€‚åŸºçº¿ç®—æ³•(Base)å‘ˆç°ä¸ºä¸€ä¸ªæ­£å¤šè¾¹å½¢ï¼Œæ–°ç®—æ³•(Comp)çš„é˜´å½±é¢ç§¯å¦‚æœå®Œç¾åŒ…è£¹ä½åŸºçº¿ï¼Œä»£è¡¨å®ç°äº†ã€å…¨é¢å ä¼˜ã€ï¼›å¦‚æœæŸä¸ªè§’å‡¹é™·ï¼Œä»£è¡¨åœ¨è¯¥æŒ‡æ ‡ä¸Šä»˜å‡ºäº†é€€åŒ–çš„ä»£ä»·ã€‚",tooltipWidth:"w-72",position:"right-center"})]})})}),L.jsxs("div",{className:"relative w-full flex-1 max-h-[500px] flex items-center justify-center bg-gray-50/50 rounded-xl border border-gray-100 shadow-inner",children:[L.jsx("svg",{className:"w-full h-full overflow-visible",viewBox:"-150 -150 300 300",preserveAspectRatio:"xMidYMid meet",children:(()=>{const s=e.filter(e=>null!==e.stats),r=s.length;if(r<3)return L.jsx("text",{x:"0",y:"0",textAnchor:"middle",fill:"#9ca3af",fontSize:"12",children:"ç”Ÿæˆé›·è¾¾å›¾è‡³å°‘éœ€è¦ 3 ä¸ªæœ‰æ•ˆçš„æ¯”å¯¹æŒ‡æ ‡"});const a=1.5*Math.max(...s.map(e=>Math.abs(e.stats.geomeanImp)))||20,l=e=>75+e/a*50,o=(e,t)=>({x:t*Math.sin(e),y:-t*Math.cos(e)}),n=[.2,.6,1,1.4].map(e=>{const t=75*e;return Array.from({length:r}).map((e,s)=>{const a=o(2*Math.PI*s/r,t);return`${a.x},${a.y}`}).join(" ")}),i=Array.from({length:r}).map((e,t)=>{const s=o(2*Math.PI*t/r,75);return`${s.x},${s.y}`}).join(" "),d=s.map((e,t)=>{const s=l(e.stats.geomeanImp),a=o(2*Math.PI*t/r,s);return`${a.x},${a.y}`}).join(" ");return L.jsxs(L.Fragment,{children:[n.map((e,t)=>L.jsx("polygon",{points:e,fill:"none",stroke:"#e5e7eb",strokeWidth:"1",strokeDasharray:2===t?"":"2 2"},`ring-${t}`)),s.map((e,t)=>{const s=2*Math.PI*t/r,a=o(s,140),n=o(s,160),i=e.stats.geomeanImp,d=o(s,l(i));return L.jsxs("g",{children:[L.jsx("line",{x1:"0",y1:"0",x2:a.x,y2:a.y,stroke:"#d1d5db",strokeWidth:"1"}),L.jsx("text",{x:n.x,y:n.y,fontSize:"8",fontWeight:"bold",fill:"#4b5563",textAnchor:"middle",dominantBaseline:"middle",children:e.metric}),L.jsxs("text",{x:n.x,y:n.y+12,fontSize:"7",fontWeight:"bold",fill:i>=0?"#059669":"#dc2626",textAnchor:"middle",children:[i>0?"+":"",i.toFixed(2),"%"]}),L.jsx("circle",{cx:d.x,cy:d.y,r:"3",fill:"#4f46e5",stroke:"#fff",strokeWidth:"1"})]},`axis-${t}`)}),L.jsx("polygon",{points:i,fill:"none",stroke:"#9ca3af",strokeWidth:"2",strokeDasharray:"4 4"}),L.jsx("text",{x:"-40",y:"-85",fontSize:"6",fill:"#9ca3af",fontWeight:"bold",transform:"rotate(-15, -40, -85)",children:t}),L.jsx("polygon",{points:d,fill:"#818cf8",fillOpacity:"0.2",stroke:"#4f46e5",strokeWidth:"2"})]})})()}),L.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2 text-xs font-bold text-gray-600 bg-white/80 p-3 rounded-lg backdrop-blur-md border border-gray-200 shadow-sm",children:[L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"w-4 h-0.5 border-t-2 border-dashed border-gray-400"})," ",t," (åŸºå‡†)"]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsx("span",{className:"w-4 h-3 bg-indigo-400/30 border-2 border-indigo-600 rounded-sm"})," ",s," (è¯„ä¼°ç»„)"]})]})]})]}):null,me=()=>{const{csvInput:t,setCsvInput:s,llmConfig:r,setLlmConfig:a,activeMetric:l,setActiveMetric:o,parsedData:n,isSidebarOpen:i,availableMetrics:m,availableAlgos:g,metaColumns:h,activeTab:u,setActiveTab:b,baseAlgo:$,setBaseAlgo:P,compareAlgo:E,setCompareAlgo:T,tableFilter:F,setTableFilter:O,corrX:D,setCorrX:W,corrY:Y,setCorrY:V,paretoX:z,setParetoX:R,paretoY:B,setParetoY:X,paretoZ:K,setParetoZ:U,selectedCases:q,sortConfig:G,tooltipState:J,setTooltipState:le,deepDiveCase:me,setDeepDiveCase:ge,hoveredCase:pe,setHoveredCase:he,isAnalyzing:ue,setIsAnalyzing:be,aiInsights:fe,setAiInsights:ye,displayInsights:ve,setDisplayInsights:je,aiError:we,setAiError:Ne,showAiConfig:Ce,setShowAiConfig:ke,showAiPanel:Ae,setShowAiPanel:Me,stats:_e,allMetricsStats:Se,sortedTableData:Ie,filteredTableData:$e,runAnalysis:Pe,toggleCase:Ee,toggleAll:Te,handleSort:Fe,handleChartMouseMove:Oe}=(()=>{const t=e.useContext(Z);if(!t)throw new Error("useAppContext must be used within an AppProvider");return t})();e.useEffect(()=>{Pe()},[]),e.useEffect(()=>{if(!ue&&fe&&"ai_analysis"===u){let e=0;je("");const t=setInterval(()=>{je(fe.substring(0,e)),e+=3,e>fe.length&&clearInterval(t)},10);return()=>clearInterval(t)}},[fe,ue,u]);const De=me?n.find(e=>e.Case===me):null;return L.jsxs("div",{className:"min-h-screen bg-gray-100/50 p-4 lg:p-6 font-sans text-gray-800 relative",children:[L.jsx(ae,{isOpen:!!me,caseData:De,baseAlgo:$,compareAlgo:E,availableMetrics:m,onClose:()=>ge(null)}),L.jsx(oe,{isOpen:Ce,config:r,onConfigChange:a,onClose:()=>ke(!1)}),L.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-6",children:[L.jsx(Q,{isSidebarOpen:i,onToggleSidebar:()=>setIsSidebarOpen(!i)}),L.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-6",children:[L.jsx(te,{isOpen:i,csvInput:t,onCsvChange:s,onRunAnalysis:Pe}),L.jsxs("div",{className:(i?"xl:col-span-9":"xl:col-span-12")+" flex flex-col gap-4 transition-all duration-300 w-full",children:[L.jsx(se,{availableMetrics:m,activeMetric:l,onMetricChange:o,availableAlgos:g,baseAlgo:$,compareAlgo:E,onBaseAlgoChange:P,onCompareAlgoChange:T}),L.jsx("div",{className:"flex justify-between items-end px-1 mt-1",children:L.jsxs("div",{className:"text-sm font-bold text-gray-700 flex items-center gap-1",children:["æ ¸å¿ƒç»Ÿè®¡æŒ‡å¾ (",l,")",_e&&L.jsxs("span",{className:"ml-3 text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-0.5 rounded border border-indigo-100 shadow-sm",children:["æœ‰æ•ˆè®¡ç®—æ ·æœ¬: ",_e.nValid," / ",_e.nTotalChecked]})]})}),_e?L.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-3",children:[L.jsxs("div",{className:"p-4 rounded-xl border relative group transition-colors "+(_e.geomeanImp>0?"bg-emerald-50 border-emerald-200 shadow-sm":_e.geomeanImp<0?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"),children:[L.jsxs("div",{className:"text-xs font-bold mb-1 flex items-center "+(_e.geomeanImp>0?"text-emerald-800":_e.geomeanImp<0?"text-red-800":"text-gray-600"),children:["Geomean æ”¹è¿›",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"å…¬å¼:"})," ",L.jsx("code",{children:"exp(Î£ln(Ratio)/n)"}),L.jsx("br",{}),L.jsx("b",{children:"æ„ä¹‰:"})," å·¥ä¸šç•Œè¯„ä¼°ç®—æ³•æ•´ä½“æ”¹è¿›æ¯”ä¾‹çš„ç»å¯¹æ ‡å‡†ï¼Œèƒ½æœ‰æ•ˆæŠµæ¶ˆæç«¯å¼‚å¸¸å€¼çš„æ‹‰åæ•ˆåº”ã€‚"]}),position:"bottom-right"})]}),L.jsxs("div",{className:"text-2xl font-black "+(_e.geomeanImp>0?"text-emerald-600":_e.geomeanImp<0?"text-red-600":"text-gray-700"),children:[_e.geomeanImp>0?"+":"",_e.geomeanImp.toFixed(2),"%"]})]}),L.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm relative group",children:[L.jsxs("div",{className:"text-xs text-gray-500 font-bold mb-1 flex items-center",children:["Arith Mean (ç®—æœ¯)",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"å…¬å¼:"})," ",L.jsx("code",{children:"Î£(æ”¹è¿›ç‡)/n"}),L.jsx("br",{}),L.jsx("b",{children:"æ„ä¹‰:"})," ç›´è§‚ç®—æœ¯å‡å€¼ã€‚è‹¥è¯¥å€¼è¿œå¤§äº Geomeanï¼Œè¯´æ˜ä¸ªåˆ«æµ‹è¯•é›†çš„è¡¨ç°è¢«å¼‚å¸¸æ”¾å¤§ï¼ˆå¦‚åŸºçº¿åˆ†æ¯æå°ï¼‰ã€‚"]}),position:"bottom-right"})]}),L.jsxs("div",{className:"text-2xl font-black "+(_e.meanImp>0?"text-emerald-600":_e.meanImp<0?"text-red-600":"text-gray-700"),children:[_e.meanImp>0?"+":"",_e.meanImp.toFixed(2),"%"]})]}),L.jsxs("div",{className:"p-4 rounded-xl border shadow-sm transition-colors "+(_e.pValue<.05?"bg-emerald-50 border-emerald-200":"bg-orange-50 border-orange-200"),children:[L.jsx("div",{className:"text-xs font-bold mb-1 flex justify-between items-center "+(_e.pValue<.05?"text-emerald-800":"text-orange-800"),children:L.jsxs("div",{className:"flex items-center",children:["P-Value",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"æ–¹æ³•:"})," éå‚æ•° Wilcoxon ç¬¦å·ç§©æ£€éªŒ",L.jsx("br",{}),L.jsx("b",{children:"æ„ä¹‰:"})," åˆ¤æ–­æ•°æ®åˆ†å¸ƒçš„æ”¹å˜æ˜¯å¦çœŸå®æœ‰æ•ˆã€‚P < 0.05 äº®ç»¿ç¯ï¼Œè¯æ˜æ•´ä½“æå‡å…·æœ‰ç»Ÿè®¡å­¦æ˜¾è‘—æ€§ï¼Œè€Œééšæœºæµ‹è¯•å™ªå£°ã€‚"]}),position:"bottom-right"})]})}),L.jsxs("div",{className:"text-2xl font-black flex items-baseline gap-1 "+(_e.pValue<.05?"text-emerald-600":"text-orange-600"),children:[_e.pValue.toFixed(3),L.jsx("span",{className:"text-xs font-bold opacity-80",children:_e.pValue<.05?"(æ˜¾è‘—)":"(ä¸æ˜¾è‘—)"})]}),L.jsxs("div",{className:"w-full h-1.5 bg-gray-200/80 rounded-full mt-2 overflow-hidden relative border border-gray-300/50",children:[L.jsx("div",{className:"absolute left-[50%] top-0 bottom-0 w-px bg-red-500 z-10"}),L.jsx("div",{className:"h-full "+(_e.pValue<.05?"bg-emerald-500":"bg-orange-500"),style:{width:`${Math.min(_e.pValue/.1*100,100)}%`}})]})]}),L.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm relative group flex flex-col justify-between",children:[L.jsxs("div",{className:"text-xs text-gray-500 font-bold mb-1 flex items-center",children:["95% ç½®ä¿¡åŒºé—´",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"æ„ä¹‰:"})," è¯„ä¼°ç®—æ³•è¡¨ç°æ³¢åŠ¨çš„ 95% ä¸Šä¸‹é™é¢„æµ‹ã€‚å¦‚æœä¸‹é™ > 0%ï¼Œè¯´æ˜è¯¥ç®—æ³•æä¸ºç¨³å¥ï¼Œå‡ ä¹åœ¨å…¨åœºæ™¯ä¸‹å‡æœ‰æ­£å‘æ”¶ç›Šã€‚"]}),position:"bottom-left"})]}),L.jsxs("div",{className:"text-sm xl:text-base font-black text-gray-700 tracking-tighter bg-gray-50 p-1.5 rounded text-center border border-gray-100",children:["[",_e.ciLower.toFixed(1),"%, ",_e.ciUpper.toFixed(1),"%]"]})]}),L.jsxs("div",{className:"p-4 rounded-xl border shadow-sm flex flex-col justify-between "+(_e.degradedCount>0?"bg-red-50 border-red-200":"bg-emerald-50 border-emerald-200"),children:[L.jsxs("div",{className:"text-xs font-bold mb-1 flex items-center "+(_e.degradedCount>0?"text-red-800":"text-emerald-800"),children:["é€€åŒ–æ¡ˆä¾‹æ•°",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"æ„ä¹‰:"})," åœ¨å‚ä¸è®¡ç®—çš„æœ‰æ•ˆæ ·æœ¬ä¸­ï¼Œæ”¹è¿›ç‡ < 0% çš„æ¡ˆä¾‹æ€»æ•°ã€‚å·¥ä¸šç•Œé€šå¸¸å¯¹é€€åŒ–æ•°é‡æœ‰æå…¶ä¸¥æ ¼çš„å®¹å¿åº¦çº¢çº¿ã€‚"]}),position:"bottom-left"})]}),L.jsx("div",{className:"text-2xl font-black "+(_e.degradedCount>0?"text-red-600":"text-emerald-600"),children:_e.degradedCount})]}),L.jsxs("div",{className:"p-4 rounded-xl border shadow-sm transition-colors "+(_e.minImp<0?"bg-red-50 border-red-200":"bg-emerald-50 border-emerald-200"),children:[L.jsxs("div",{className:"text-xs font-bold mb-1 flex items-center "+(_e.minImp<0?"text-red-800":"text-emerald-800"),children:["æœ€å¤§é€€åŒ–å¹…åº¦",L.jsx(ee,{content:L.jsxs("div",{className:"space-y-1",children:[L.jsx("b",{children:"æ„ä¹‰:"}),' WNS (Worst Case) æ€æƒ³ï¼Œå³"æœ€åèƒ½æœ‰å¤šå"ã€‚ä¸¥é‡è·Œç ´åº•çº¿ï¼ˆæœ€å¤§é€€åŒ–å¹…åº¦è¿‡å¤§ï¼‰çš„ç®—æ³•æ”¹åŠ¨é€šå¸¸ä¼šè¢«ç›´æ¥é©³å›ã€‚']}),position:"bottom-left"})]}),L.jsx("div",{className:"text-2xl font-black "+(_e.minImp<0?"text-red-600":"text-emerald-600"),children:_e.minImp<0?_e.minImp.toFixed(2)+"%":"æ— "})]})]}):L.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-700 p-4 rounded-lg flex items-center gap-2 shadow-sm font-semibold text-sm",children:[L.jsx(y,{className:"w-5 h-5"}),"æ²¡æœ‰åˆæ³•çš„å¯¹æ¯”æ•°æ®å‚ä¸è®¡ç®—ã€‚è¯·æ£€æŸ¥æ•°æ®æºï¼Œæˆ–åˆ‡æ¢ç„¦ç‚¹ç›®æ ‡ã€‚"]}),L.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-[800px] relative z-0",children:[J.visible&&L.jsxs("div",{className:"absolute pointer-events-none bg-gray-900/95 border border-gray-700 text-white text-xs px-4 py-3 rounded-xl shadow-2xl z-[100] whitespace-nowrap backdrop-blur-sm transition-opacity duration-75",style:{left:J.x+15,top:J.y+15},children:[L.jsx("div",{className:"font-bold text-sm mb-1.5 text-indigo-300 border-b border-gray-700 pb-1",children:J.title}),J.lines.map((e,t)=>L.jsx("div",{className:"text-gray-300 font-mono text-[11px] leading-relaxed",children:e},t))]}),L.jsxs("div",{className:"flex items-center overflow-x-auto border-b border-gray-200 bg-gray-50 scrollbar-hide flex-shrink-0 z-20 relative",children:[L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("table"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("table"),children:[L.jsx(v,{className:"w-4 h-4"})," è¯¦ç»†æ•°æ®"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("single"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("single"),children:[L.jsx(v,{className:"w-4 h-4"})," ç®±çº¿å›¾"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("correlation"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("correlation"),children:[L.jsx(j,{className:"w-4 h-4"})," ç‰¹å¾ç›¸å…³æ€§"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("multi"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("multi"),children:[L.jsx(w,{className:"w-4 h-4"})," å¸•ç´¯æ‰˜æŠ•å½±"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("all_metrics"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("all_metrics"),children:[L.jsx(N,{className:"w-4 h-4"})," å…¨å±€å¤šç»´é›·è¾¾"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("ai_analysis"===u?"border-purple-600 text-purple-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("ai_analysis"),children:[L.jsx(C,{className:"w-4 h-4"})," AI æ™ºèƒ½è¯Šæ–­"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("qor_simulator"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("qor_simulator"),children:[L.jsx(k,{className:"w-4 h-4"})," QoR æ¨¡æ‹Ÿå™¨"]}),L.jsxs("button",{className:"px-4 py-4 text-sm font-bold border-b-[3px] transition-colors flex items-center gap-2 whitespace-nowrap "+("trend_tracking"===u?"border-indigo-600 text-indigo-700 bg-white":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50"),onClick:()=>b("trend_tracking"),children:[L.jsx(A,{className:"w-4 h-4"})," æ¼”è¿›è¶‹åŠ¿"]})]}),L.jsxs("div",{className:"bg-white flex-1 overflow-y-auto custom-scrollbar relative z-0",children:["table"===u&&L.jsxs("div",{className:"flex flex-col h-full",children:[L.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex flex-col md:flex-row justify-between items-center gap-4 flex-shrink-0 z-20",children:[L.jsx("div",{className:"flex flex-wrap items-center gap-3",children:L.jsxs("span",{className:"text-sm font-bold text-indigo-800 flex items-center gap-1",children:["æ˜ç»†æ•°æ®ç›®æ ‡: ",L.jsx("span",{className:"bg-indigo-100 px-2 py-0.5 rounded text-indigo-700 shadow-inner ml-1",children:l}),L.jsx(ee,{content:"è¯¦ç»†æ•°æ®è¡¨æ ¼åŒ…å«æ‰€æœ‰çš„åº•å±‚æ˜ç»†ã€‚æ”¯æŒæŒ‰è¡Œå‹¾é€‰(å‰”é™¤è„æ•°æ®)ã€æŒ‰åˆ—å¤´ç‚¹å‡»æ’åºã€‚è‹¥å­˜åœ¨Instanceå±æ€§åˆ—ï¼Œç³»ç»Ÿé»˜è®¤æŒ‰å¤§åˆ°å°æ’åºã€‚ç³»ç»Ÿè‡ªåŠ¨ä½¿ç”¨ IQR (å››åˆ†ä½è·) æ³•åˆ™æ ‡æ³¨å‡ºç¦»ç¾¤å¼‚å¸¸å€¼(Outliers)ã€‚ç‚¹å‡»æœ€å³ä¾§ ğŸ” å›¾æ ‡å¯è¿›è¡Œä¸ªä¾‹æ·±åº¦é›·è¾¾é€è§†ã€‚",tooltipWidth:"w-72",position:"right-center"})]})}),L.jsxs("div",{className:"flex flex-wrap gap-3 items-center w-full md:w-auto",children:[L.jsxs("div",{className:"flex items-center gap-2 bg-gray-50 p-1 rounded-lg border border-gray-200 shadow-inner text-xs",children:[L.jsx("button",{onClick:()=>O("all"),className:"px-3 py-1.5 rounded transition-colors "+("all"===F?"bg-white text-indigo-700 font-bold shadow-sm":"text-gray-500 hover:text-gray-700 font-semibold"),children:"å…¨éƒ¨"}),L.jsxs("button",{onClick:()=>O("degraded"),className:"px-3 py-1.5 rounded transition-colors flex items-center gap-1 "+("degraded"===F?"bg-white text-red-700 font-bold shadow-sm":"text-gray-500 hover:text-gray-700 font-semibold"),children:[L.jsx(c,{className:"w-3 h-3"}),"é€€åŒ–"]}),L.jsxs("button",{onClick:()=>O("outlier"),className:"px-3 py-1.5 rounded transition-colors flex items-center gap-1 "+("outlier"===F?"bg-white text-purple-700 font-bold shadow-sm":"text-gray-500 hover:text-gray-700 font-semibold"),children:[L.jsx(y,{className:"w-3 h-3"}),"å¼‚å¸¸"]})]}),L.jsxs("button",{onClick:()=>((e,t,s,r,a,l)=>{let o=`Case,${a.join(",")},Base_${s},Comp_${r},Improvement(%),Status\n`;e.forEach(e=>{var n,i;const d=null==(n=e.raw[t])?void 0:n[s],c=null==(i=e.raw[t])?void 0:i[r],x=null==d||null==c;let m=0,g="Filtered";if(!x){m=H(d,c);const t=null==l?void 0:l.validCases.find(t=>t.Case===e.Case);t&&(g="positive"===t.outlierType?"Significant_Opt":"negative"===t.outlierType?"Severe_Degrade":m>0?"Optimized":m<0?"Degraded":"Neutral")}const p=a.map(t=>e.meta[t]).join(",");o+=`${e.Case},${p},${null==d?"NaN":d},${null==c?"NaN":c},${x?"-":m.toFixed(2)},${g}\n`});const n=new Blob([o],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(n),d=document.createElement("a");d.setAttribute("href",i),d.setAttribute("download",`eda_export_${t}_${(new Date).getTime()}.csv`),document.body.appendChild(d),d.click(),document.body.removeChild(d)})($e,l,$,E,h,_e),className:"text-sm font-bold bg-indigo-50 text-indigo-700 hover:bg-indigo-100 border border-indigo-200 px-3 py-1.5 rounded-lg flex items-center gap-1.5 transition-colors shadow-sm",children:[L.jsx(M,{className:"w-4 h-4"}),"å¯¼å‡º CSV"]})]})]}),L.jsx("div",{className:"overflow-x-auto overflow-y-auto flex-1 custom-scrollbar pb-10",children:L.jsxs("table",{className:"min-w-full text-sm text-left relative",children:[L.jsx("thead",{className:"bg-gray-100 text-gray-700 sticky top-0 z-10 shadow-sm border-b border-gray-200",children:L.jsxs("tr",{children:[L.jsx("th",{className:"px-4 py-3 w-10 text-center cursor-pointer hover:bg-gray-200",onClick:Te,title:"å…¨é€‰/åé€‰",children:q.size===n.length?L.jsx(_,{className:"w-4 h-4 text-indigo-600 mx-auto"}):L.jsx(f,{className:"w-4 h-4 text-gray-400 mx-auto"})}),L.jsx("th",{className:"px-4 py-3 font-bold cursor-pointer hover:bg-gray-200 transition-colors",onClick:()=>Fe("Case"),children:L.jsxs("div",{className:"flex items-center justify-between",children:["Case Name ",L.jsx(re,{config:G,columnKey:"Case"})]})}),h.map(e=>L.jsx("th",{className:"px-4 py-3 font-bold text-right border-l border-gray-200 cursor-pointer hover:bg-gray-200 transition-colors text-gray-600",onClick:()=>Fe(e),children:L.jsxs("div",{className:"flex items-center justify-end",children:[e," ",L.jsx(re,{config:G,columnKey:e})]})},e)),L.jsx("th",{className:"px-4 py-3 font-bold text-right border-l border-gray-300 cursor-pointer hover:bg-gray-200 bg-gray-50",onClick:()=>Fe($),children:L.jsxs("div",{className:"flex justify-end items-center",children:[$," ",L.jsx(re,{config:G,columnKey:$})]})}),L.jsx("th",{className:"px-4 py-3 font-bold text-right cursor-pointer hover:bg-gray-200 bg-indigo-50/30 text-indigo-900",onClick:()=>Fe(E),children:L.jsxs("div",{className:"flex justify-end items-center",children:[E," ",L.jsx(re,{config:G,columnKey:E})]})}),L.jsx("th",{className:"px-4 py-3 font-bold text-right border-l border-gray-300 cursor-pointer hover:bg-indigo-100 bg-indigo-50/60",onClick:()=>Fe("imp"),children:L.jsxs("div",{className:"flex justify-end items-center text-indigo-900",children:["æ”¹è¿›ç‡ %",L.jsx(ee,{text:"è®¡ç®—å…¬å¼ï¼š((Base - Compare) / Base) * 100ã€‚æ­£æ•°(ç»¿è‰²)ä»£è¡¨æ–°ç®—æ³•ä¼˜åŒ–ï¼Œè´Ÿæ•°(çº¢è‰²)ä»£è¡¨æ–°ç®—æ³•é€€åŒ–ã€‚",className:"w-3.5 h-3.5 ml-1 text-indigo-500",position:"bottom-left"}),L.jsx(re,{config:G,columnKey:"imp"})]})}),L.jsx("th",{className:"px-4 py-3 font-bold text-center w-36 bg-indigo-50/60 border-l border-indigo-100 flex items-center justify-center gap-1",children:"çŠ¶æ€ä¸é€è§†"})]})}),L.jsx("tbody",{className:"divide-y divide-gray-100",children:$e.map(e=>{var t,s;const r=q.has(e.Case),a=null==(t=e.raw[l])?void 0:t[$],o=null==(s=e.raw[l])?void 0:s[E],n=null==a||null==o;let i=0,m="normal";if(!n){i=0===a?0===o?0:-100:(a-o)/a*100;const t=null==_e?void 0:_e.validCases.find(t=>t.Case===e.Case);t&&(m=t.outlierType)}const g=pe===e.Case;let p=r?g?"bg-indigo-100/50 outline outline-2 outline-indigo-400 z-10 relative":"hover:bg-indigo-50/30":"bg-gray-50/50 opacity-40 grayscale",u="text-gray-500",b=null;return!r||n?b=L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-bold bg-gray-200 text-gray-500",children:[L.jsx(f,{className:"w-3 h-3"})," å·²è¿‡æ»¤"]}):"positive"===m?(u="text-purple-600 font-black",b=L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-bold bg-purple-100 text-purple-800 border border-purple-300 shadow-sm",children:[L.jsx(I,{className:"w-3 h-3"})," æ˜¾è‘—ä¼˜åŒ–"]})):"negative"===m?(u="text-red-700 font-black",b=L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-bold bg-red-100 text-red-800 border border-red-300 shadow-sm",children:[L.jsx(y,{className:"w-3 h-3"})," ä¸¥é‡é€€åŒ–"]})):i>0?(u="text-emerald-600 font-bold",b=L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-medium bg-emerald-50 text-emerald-700 border border-emerald-200",children:[L.jsx(d,{className:"w-3 h-3"})," ä¼˜åŒ–"]})):i<0?(u="text-red-600 font-bold",b=L.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-medium bg-red-50 text-red-700 border border-red-200",children:[L.jsx(c,{className:"w-3 h-3"})," é€€åŒ–"]})):b=L.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[11px] font-bold bg-gray-100 text-gray-600 border border-gray-200",children:"æŒå¹³"}),L.jsxs("tr",{className:`transition-all duration-150 ${p}`,onMouseEnter:()=>{r&&!n&&he(e.Case)},onMouseLeave:()=>he(null),children:[L.jsx("td",{className:"px-4 py-3 text-center cursor-pointer",onClick:()=>Ee(e.Case),children:L.jsx("input",{type:"checkbox",checked:r,onChange:()=>{},className:"rounded text-indigo-600 focus:ring-indigo-500 cursor-pointer w-4 h-4"})}),L.jsx("td",{className:"px-4 py-3 font-bold text-gray-800 max-w-[200px] truncate",title:e.Case,children:e.Case}),h.map(t=>L.jsx("td",{className:"px-4 py-3 text-right font-mono text-xs text-gray-500 border-l border-gray-100",title:e.meta[t],children:ie(e.meta[t])||"-"},t)),L.jsx("td",{className:"px-4 py-3 text-right font-mono text-gray-600 border-l border-gray-200 bg-gray-50/50",children:null==a?L.jsx("span",{className:"text-gray-300",children:"NaN"}):a}),L.jsx("td",{className:"px-4 py-3 text-right font-mono font-bold text-indigo-900 bg-indigo-50/20",children:null==o?L.jsx("span",{className:"text-gray-300",children:"NaN"}):o}),L.jsx("td",{className:`px-4 py-3 text-right font-mono tracking-tight border-l border-gray-200 ${u} bg-indigo-50/40`,children:n?"-":`${i>0?"+":""}${i.toFixed(2)}%`}),L.jsxs("td",{className:"px-4 py-3 text-center bg-indigo-50/40 border-l border-indigo-100/50 flex justify-center items-center gap-2",children:[b,r&&!n&&L.jsx("button",{onClick:()=>ge(e.Case),className:"text-indigo-400 hover:text-indigo-700 bg-white p-1 rounded border border-indigo-200 shadow-sm",title:"å•ç‚¹å¤šç»´æ·±åº¦é€è§†",children:L.jsx(x,{className:"w-3.5 h-3.5"})})]})]},e.Case)})})]})})]}),"single"===u&&_e&&L.jsx(ne,{stats:_e,activeMetric:l,handleChartMouseMove:Oe,hoveredCase:pe,setHoveredCase:he,setTooltipState:le}),"correlation"===u&&n.length>0&&L.jsx(de,{parsedData:n,selectedCases:q,metaColumns:h,availableMetrics:m,corrX:D,corrY:Y,setCorrX:W,setCorrY:V,handleChartMouseMove:Oe,hoveredCase:pe,setHoveredCase:he,setTooltipState:le,baseAlgo:$,compareAlgo:E}),"multi"===u&&n.length>0&&L.jsx(ce,{parsedData:n,selectedCases:q,availableMetrics:m,paretoX:z,paretoY:B,paretoZ:K,setParetoX:R,setParetoY:X,setParetoZ:U,handleChartMouseMove:Oe,hoveredCase:pe,setHoveredCase:he,setTooltipState:le,baseAlgo:$,compareAlgo:E}),"all_metrics"===u&&Se.length>0&&L.jsx(xe,{allMetricsStats:Se,baseAlgo:$,compareAlgo:E}),"ai_analysis"===u&&L.jsxs("div",{className:"h-full flex flex-col",children:[L.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 p-6 border-b border-purple-100 flex-shrink-0",children:L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsxs("div",{children:[L.jsxs("h3",{className:"font-bold text-xl text-gray-900 flex items-center gap-2",children:[L.jsx(C,{className:"w-6 h-6 text-purple-600"})," EDA æ¶æ„å¸ˆæ™ºèƒ½è¯Šæ–­"]}),L.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["åŸºäº ",$," vs ",E," çš„æ·±åº¦åˆ†ææŠ¥å‘Š"]})]}),L.jsxs("div",{className:"flex items-center gap-2",children:[L.jsxs("button",{onClick:()=>ke(!0),className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 font-bold rounded-lg border border-gray-200 flex items-center gap-2 transition-colors shadow-sm",children:[L.jsx(p,{className:"w-4 h-4"})," AI é…ç½®"]}),L.jsxs("button",{onClick:async()=>{if(_e&&l){if("gemini"!==r.provider&&!r.apiKey)return Ne(`è¯·å…ˆåœ¨è®¾ç½®ä¸­é…ç½®æ‚¨çš„ ${r.provider} API Key`),void ke(!0);be(!0),ye(""),je(""),Ne("");try{const e=await(async(e,t,s,r,a,l,o,n,i)=>{var d,c,x,m,g,p,h,u;if(!a||!r)throw new Error("ç»Ÿè®¡æ•°æ®ä¸å®Œæ•´ï¼Œæ— æ³•ç”Ÿæˆåˆ†æ");if("gemini"!==e.provider&&!e.apiKey)throw new Error(`è¯·å…ˆé…ç½® ${e.provider} API Key`);const b=a.validCases.filter(e=>e.imp<0).map(e=>({case:e.Case,base:e.bVal,compare:e.cVal,diff_pct:e.imp.toFixed(2)+"%"}));let f=[];const y=i.find(e=>e.toLowerCase().includes("instance")||e.toLowerCase().includes("cell")||e.toLowerCase().includes("net"));y&&(f=[...a.validCases].sort((e,t)=>(parseFloat(t.meta[y])||0)-(parseFloat(e.meta[y])||0)).slice(0,3).map(e=>({case:e.Case,scale:e.meta[y],diff_pct:e.imp.toFixed(2)+"%"})));const v=l.map(e=>`- ${e.metric}: å‡ ä½•å¹³å‡æ”¹è¿›ç‡ = ${e.stats?e.stats.geomeanImp.toFixed(2)+"%":"N/A"}, P-Value = ${e.stats?e.stats.pValue.toFixed(3):"N/A"}`).join("\n"),j=e.userPrompt.replace(/{{baseAlgo}}/g,t).replace(/{{compareAlgo}}/g,s).replace(/{{activeMetric}}/g,r).replace(/{{allMetricsSummary}}/g,v).replace(/{{badCases}}/g,JSON.stringify(b)).replace(/{{largeCases}}/g,JSON.stringify(f));try{let t="";if("gemini"===e.provider){const s=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${e.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:j}]}],systemInstruction:{parts:[{text:e.systemPrompt}]}})});if(401===s.status)throw new Error("API Key æ— æ•ˆæˆ–æœªæˆæƒ (401é”™è¯¯)ã€‚è¯·ç‚¹å‡»é…ç½®é‡æ–°å¡«å…¥ã€‚");if(!s.ok)throw new Error(`Gemini API Error: ${s.status}`);t=null==(g=null==(m=null==(x=null==(c=null==(d=(await s.json()).candidates)?void 0:d[0])?void 0:c.content)?void 0:x.parts)?void 0:m[0])?void 0:g.text}else{const s=`${e.baseUrl.replace(/\/$/,"")}/chat/completions`,r=await fetch(s,{method:"POST",headers:{Authorization:`Bearer ${e.apiKey}`,"Content-Type":"application/json"},body:JSON.stringify({model:e.model,messages:[{role:"system",content:e.systemPrompt},{role:"user",content:j}],temperature:.7})});if(401===r.status)throw new Error("API Key æ— æ•ˆæˆ–æœªæˆæƒ (401é”™è¯¯)ã€‚è¯·æ£€æŸ¥ API Key è®¾ç½®ã€‚");if(!r.ok)throw new Error(`API Error: ${r.status}`);t=null==(u=null==(h=null==(p=(await r.json()).choices)?void 0:p[0])?void 0:h.message)?void 0:u.content}if(!t)throw new Error("API æœªè¿”å›æœ‰æ•ˆçš„æ–‡æœ¬å†…å®¹ã€‚");return t}catch(w){throw new Error(`è°ƒç”¨å¤±è´¥: ${w.message}`)}})(r,$,E,l,_e,Se,0,0,h);ye(e)}catch(e){Ne(`è°ƒç”¨å¤±è´¥: ${e.message}`)}finally{be(!1)}}},disabled:ue,className:"px-4 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 disabled:from-gray-400 disabled:to-gray-400 text-white font-bold rounded-lg transition-colors flex items-center gap-2 shadow-sm",children:[ue?L.jsx(S,{className:"w-4 h-4 animate-spin"}):L.jsx(I,{className:"w-4 h-4"}),fe?"é‡æ–°è¯Šæ–­":"ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š"]})]})]})}),L.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50 custom-scrollbar",children:ue?L.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-purple-400 space-y-4",children:[L.jsx(S,{className:"w-12 h-12 animate-spin"}),L.jsxs("p",{className:"font-bold animate-pulse",children:["æ­£åœ¨æ·±åº¦åˆ†æ ",$," vs ",E," ..."]}),L.jsx("p",{className:"text-sm text-gray-400",children:"AI æ­£åœ¨ç”Ÿæˆä¸“ä¸šè¯Šæ–­æŠ¥å‘Šï¼Œè¯·ç¨å€™..."})]}):we?L.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-6 rounded-xl flex gap-3 text-sm max-w-2xl mx-auto",children:[L.jsx(y,{className:"w-6 h-6 flex-shrink-0"}),L.jsxs("div",{children:[L.jsx("p",{className:"font-bold mb-2",children:"è¯Šæ–­å¤±è´¥"}),L.jsx("p",{children:we})]})]}):ve?L.jsx("div",{className:"prose prose-sm prose-indigo max-w-4xl mx-auto text-sm text-gray-800 leading-relaxed bg-white p-8 rounded-xl shadow-sm border border-gray-100",children:(We=ve,We.split("\n").map((e,t)=>{if(""===e.trim())return L.jsx("br",{},t);if(e.startsWith("### "))return L.jsx("h3",{className:"text-lg font-bold text-indigo-800 mt-6 mb-3 border-b border-indigo-100 pb-1",children:e.replace("### ","")},t);if(e.startsWith("## "))return L.jsx("h2",{className:"text-xl font-bold text-indigo-900 mt-6 mb-3 border-b border-indigo-200 pb-2",children:e.replace("## ","")},t);if(e.startsWith("- ")){const s=e.replace("- ","").replace(/\*\*(.*?)\*\*/g,'<strong class="text-indigo-900 font-bold">$1</strong>');return L.jsx("li",{className:"ml-4 list-disc mb-1 marker:text-indigo-400",dangerouslySetInnerHTML:{__html:s}},t)}const s=e.replace(/\*\*(.*?)\*\*/g,'<strong class="text-indigo-900 font-bold">$1</strong>');return L.jsx("p",{className:"mb-2 text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:s}},t)}))}):L.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 space-y-4",children:[L.jsx(C,{className:"w-16 h-16 opacity-50"}),L.jsx("p",{className:"font-bold",children:"ç‚¹å‡»ä¸Šæ–¹ã€Œç”Ÿæˆè¯Šæ–­æŠ¥å‘Šã€æŒ‰é’®å¼€å§‹ AI æ™ºèƒ½åˆ†æ"}),L.jsx("p",{className:"text-sm",children:"éœ€è¦å…ˆé…ç½® AI API Keyï¼ˆæ”¯æŒ Geminiã€OpenAI ç­‰ï¼‰"})]})})]}),"qor_simulator"===u&&m.length>0&&L.jsx("div",{className:"p-6 h-full flex items-center justify-center",children:L.jsx("div",{className:"text-gray-400 font-bold",children:"QoR ç»¼åˆæ¨¡æ‹Ÿå™¨è§†å›¾"})}),"trend_tracking"===u&&L.jsx("div",{className:"p-6 h-full flex items-center justify-center",children:L.jsx("div",{className:"text-gray-400 font-bold",children:"æ¼”è¿›è¶‹åŠ¿è§†å›¾"})})]})]})]})]})]})]});var We},ge=()=>L.jsx(J,{children:L.jsx(me,{})});R.createRoot(document.getElementById("root")).render(L.jsx($.StrictMode,{children:L.jsx(ge,{})}));
//# sourceMappingURL=index-UTMbPRR7.js.map
